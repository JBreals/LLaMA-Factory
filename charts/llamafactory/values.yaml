image:
  repository: your-registry/llamafactory
  tag: latest
  pullPolicy: IfNotPresent

command:
  - llamafactory-cli
  - webui

serviceAccount:
  create: true
  name: ""

podAnnotations: {}
podLabels: {}

resources:
  requests:
    cpu: 1
    memory: 8Gi
    nvidia.com/gpu: 1
  limits:
    nvidia.com/gpu: 1

nodeSelector: {}
affinity: {}
tolerations: []

ports:
  webui: 7860
  api: 8000

service:
  type: ClusterIP
  annotations: {}

ingress:
  enabled: true
  className: ""
  annotations: {}
  hosts:
    - host: llama-factory.quantumcns.ai
      paths:
        - path: /
          pathType: Prefix
          servicePort: webui
        # - path: /v1
        #   pathType: Prefix
        #   servicePort: api
  tls: []

persistence:
  enabled: true
  existingClaim: ""
  storageClass: "qks-ceph-block"
  accessModes:
    - ReadWriteOnce
  size: 100Gi
  mountPath: /app/storage

env:
  # Default ports; override if needed
  GRADIO_SERVER_PORT: 7860
  API_PORT: 8000
extraEnv:
  - name: HF_HOME
    value: /app/storage/hf_home
  - name: HF_HUB_CACHE
    value: /app/storage/hf_home/hub
  - name: TRANSFORMERS_CACHE
    value: /app/storage/hf_home/hub
  - name: HF_DATASETS_CACHE
    value: /app/storage/hf_home/datasets
  - name: MLFLOW_HOME
    value: /app/storage/mlruns
  - name: LLAMABOARD_OUTPUT_ROOT
    value: /app/storage/outputs
  - name: LLAMABOARD_EXPORT_ROOT
    value: /app/storage/exports
  - name: MODEL_DOWNLOAD_DIR
    value: /app/storage/models
  # S3 endpoint & credentials (set values or override via your values file)
  - name: AWS_ACCESS_KEY_ID
    value: ""
  - name: AWS_SECRET_ACCESS_KEY
    value: ""
  - name: AWS_DEFAULT_REGION
    value: ""
  - name: AWS_ENDPOINT_URL
    value: ""
  # MLflow tracking (set values or override via your values file)
  - name: MLFLOW_TRACKING_URI
    value: ""
  - name: MLFLOW_EXPERIMENT_NAME
    value: ""
  - name: MLFLOW_TRACKING_USERNAME
    value: ""
  - name: MLFLOW_TRACKING_PASSWORD
    value: ""
  - name: LAKECTL_SERVER_ENDPOINT_URL
    value: ""
  - name: LAKECTL_CREDENTIALS_ACCESS_KEY_ID
    value: ""
  - name: LAKECTL_CREDENTIALS_SECRET_ACCESS_KEY
    value: ""

envFrom: []

volumeMounts: []
volumes: []

livenessProbe:
  httpGet:
    path: /
    port: webui
  initialDelaySeconds: 30
  periodSeconds: 15
  timeoutSeconds: 5
  failureThreshold: 5

readinessProbe:
  httpGet:
    path: /
    port: webui
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 3

extraContainers: []
extraInitContainers: []
